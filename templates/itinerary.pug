- var month = ["ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"];
mixin driving(event)
  div
    span.event-type= event.type
    h4= event.title
      if(event.meta.via)
        span  - Via #{event.meta.via}
    p
      span.avg-time Avg. time #{event.meta.avgTime.hours}hs #{event.meta.avgTime.minutes}min.
      span.distance Distance #{event.meta.distance}km
    if event.description
      p= event.description !== ''
    if event.meta.highlights.length
      div
        h5 Puntos de interes
        p
          span= event.meta.highlights.join(', ')
    if event.meta.things_to_know.length
      div
        ul
          each ttk in event.meta.things_to_know
            li
              h5= ttk.title
              p= ttk.description



mixin place(event)
  div
    span.event-type= event.type
    h4= event.title
    p= event.description

doctype html
html
  head
    title
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet")
    style.

      @page {
        size: A4;   /* auto is the initial value */
        margin-top: 1cm;
        margin-bottom: 1cm;
      }

      ul, li, p{
        margin: 0;
        list-style: none;
        padding: 0;
      }

      @media print {
        html {
          font-size: 11px;
        }
      }

      body{
        margin: 0 auto;
        width: 100%;
        max-width: 842px;
        font-family: Roboto, "Helvetica Neue", sans-serif;
      }

      .main{
        background: #f5f5f5;
        padding: 1.5rem 1rem;
        box-sizing: border-box;
        margin: 2rem 1rem;
      }
      .event-cluster{
        padding: 1rem 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.12);
        margin: 0 1rem;
      }
      .event-cluster h4{
        font-weight: 500;
        font-size: 1rem;
        line-height: 1.25rem;
        color: rgba(0,0,0,0.7);
        margin-bottom: 0.625rem;
        margin-top: 0;
      }

      .event-cluster h5 {
        font-weight: 500;
        font-size: 0.625rem;
        line-height: 0.625rem;
        color: rgba(0, 0, 0, 0.54);
        margin: 0;
      }

      .event-cluster p{
        font-size: 0.875rem;
        line-height: 1.25rem;
        margin: 0 0 0.5rem 0;
        color: rgba(0,0,0,0.7);
      }

      .event-type{
        font-size: 0.625rem;
        line-height: 0.625rem;
        color: rgba(0,0,0,0.54);
      }

      .day-list{
        page-break-inside: avoid;
      }

      .day-list li:last-child .event-cluster{
        margin-bottom: 0;
        border-bottom: none;
      }

      .day-ctn{
        float: left;
        width: 2.5rem;
        margin-top: 1.1rem;
        color: #FF5252;
        text-align: center;
      }
      .nod-ctn{
        font-size: 1.625rem;
        font-weight: 500;
        display: block;
      }

      .month-ctn{
        font-size: 1.125rem;
        line-height: 0.625rem;
        display: block;
      }

      .clearfix:after {
        visibility: hidden;
        display: block;
        font-size: 0;
        content: " ";
        clear: both;
        height: 0;
      }

      .clearfix {
        display: inline-block;
      }

      /* start commented backslash hack \*/
      * html .clearfix {
        height: 1%;
      }

      .clearfix {
        display: block;
      }

      .events-list{
        float: left;
        width: calc(100% - 2.5rem);
      }

      .title{
        padding: 2rem 1rem;
      }

      .title h1{
        margin: 0;
        font-weight: 500;
        color: rgba(0, 0, 0, 0.7);
      }

      .title div{
        font-size: 1rem;
        color: rgba(0, 0, 0, 0.7);
        font-weight: 500;
      }

      .title span{
        float: right;
      }

      .description{
        color: rgba(0,0,0,0.54);
        font-size: 0.875rem;
        line-height: 1.25rem;
        padding: 0 1rem;
      }

      a{
        white-space: nowrap;
        color: #1356CC;
      }

      h2{
        font-size: 1.2rem;
        color: rgba(0,0,0,0.7);
        font-weight: 500;
        padding: 0 1rem;
        margin: 0 0 0.75rem 0;
      }

      .mobile-desc{
        padding: 0 1rem;
        margin-bottom: 2rem;
      }

      .mobile-desc .image-ctn{
        height: 4.25rem;
        width: 2.5rem;
        background-size: contain;
        background-repeat: no-repeat;
        float: left;
        margin-right: 1rem;
        margin-top: 0.25rem;
      }

      .mobile-desc p{
        float: left;
        color: rgba(0, 0, 0, 0.54);
        font-size: 0.875rem;
        line-height: 1.25rem;
        width: calc(100% - 3.5rem);
      }


      /* close commented backslash hack */

  body.mat-typography
    header
      div.title.clearfix
        h1= header.name
          span #123123
          if header.reference
            span ##{header.reference}
        div= header.start_date + ' - ' + header.end_date
      h2= header.passenger_name
      div.description
        p
          span Accede al viaje a través de tu smartphone ingresando a&nbsp;
          a(href="https://#{basePath}/trips/#{header.id}-#{header.name}") https://#{basePath}/trips/#{header.id}-#{header.name}
          span .
          br
          span En él encontraras el detalle de tu itinerario, fotos y descripciones de los lugares que visitarás y todas las rutas para que navegues desde tu dispositivo.
      if header.comment
        div.description
          p= header.comment
    main.main
      ul.day-list
        each day in itinerary
          li.clearfix
            div.day-ctn
                span.nod-ctn= day.date.substr(8,2)
                span.month-ctn= month[parseInt(day.date.substr(5,2))-1]
            div.events-list
              ul
                each event in day.events
                  li.event-cluster
                    if event.type == 'Driving'
                      +driving(event)
                    else
                      +place(event)
    //footer
      div.mobile-desc.clearfix
        div.image-ctn(style="background-image: url('data:image/png;base64,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')")
        p
          span Accede al viaje a través de tu smartphone ingresando a&nbsp;
          a(href="https://#{basePath}/trips/#{header.id}-#{header.name}") https://#{basePath}/trips/#{header.id}-#{header.name}
          span . En él encontraras el detalle de tu itinerario, fotos y descripciones de los lugares que visitarás y todas las rutas para que navegues desde tu dispositivo.



