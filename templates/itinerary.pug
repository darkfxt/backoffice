- var month = ["ene", "feb", "mar", "abr", "may", "jun", "jul", "ago", "sep", "oct", "nov", "dic"];
mixin driving(event)
  div
    span.event-type= event.type
    h4= event.title
      if(event.meta.via)
        span  - Via #{event.meta.via}
    p
      span.avg-time Avg. time #{event.meta.avgTime.hours}hs #{event.meta.avgTime.minutes}min
      span.distance Distance #{event.meta.distance}km
    p= event.description
    if event.meta.highlights.length
      div
        h5 Puntos de interes
        p
          span= event.meta.highlights.join(', ')
    if event.meta.things_to_know.length
      div
        ul
          each ttk in event.meta.things_to_know
            li
              h5= ttk.title
              p= ttk.description



mixin place(event)
  div
    span.event-type= event.type
    h4= event.title
    p= event.description

doctype html
html
  head
    title
    meta(name="viewport" content="width=device-width, initial-scale=1")
    link(href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet")
    style.

      @page {
        size: A4;   /* auto is the initial value */
        margin-top: 1cm;
        margin-bottom: 1cm;
      }

      ul, li{
        margin: 0;
        list-style: none;
        padding: 0;
      }

      body {
        background: rgb(204, 204, 204);
      }

      @media print {
        html {
          font-size: 11px;
        }
      }

      body{
        margin: 0 auto;
        width: 100%;
        max-width: 842px;
        background: #f5f5f5;
        font-family: Roboto, "Helvetica Neue", sans-serif;
      }

      .main{
        background: #fff;
        padding: 1.5em 1em;
        box-sizing: border-box;
      }
      .event-cluster{
        padding: 1em 0;
        border-bottom: 1px solid rgba(0, 0, 0, 0.12);
        margin: 0 1em 1.5em;
      }
      .event-cluster h4{
        font-weight: 500;
        font-size: 1em;
        line-height: 1.25em;
        color: rgba(0,0,0,0.7);
        margin-bottom: 0.625em;
        margin-top: 0;
      }

      .event-cluster h5 {
        font-weight: 500;
        font-size: 0.625em;
        line-height: 0.625em;
        color: rgba(0, 0, 0, 0.54);
        margin-bottom: 0;
      }

      .event-cluster p{
        font-size: 0.875em;
        line-height: 1.25em;
        margin: 0 0 0.5em 0;
        color: rgba(0,0,0,0.7);
      }

      .event-type{
        font-size: 0.625em;
        line-height: 0.625em;
        color: rgba(0,0,0,0.54);
      }

      .day-list{
        page-break-inside: avoid;
      }

      .day-list li{
        page-break-after: auto;
      }

      .day-ctn{
        float: left;
        width: 2.5em;
        margin-top: 1em;
        color: #FF5252;
        text-align: center;
      }
      .nod-ctn{
        font-size: 1.625em;
        font-weight: 500;
        display: block;
      }

      .month-ctn{
        font-size: 1.125em;
        line-height: 0.625em;
        display: block;
      }

      .clearfix:after {
        visibility: hidden;
        display: block;
        font-size: 0;
        content: " ";
        clear: both;
        height: 0;
      }

      .clearfix {
        display: inline-block;
      }

      /* start commented backslash hack \*/
      * html .clearfix {
        height: 1%;
      }

      .clearfix {
        display: block;
      }

      .events-list{
        float: left;
        width: calc(100% - 2.5em);
      }

      .title h1{
        float: left;
      }

      .title span{
        float: right;
      }

      /* close commented backslash hack */

  body.mat-typography
    header
      div.title.clearfix
        h1= header.name
        span= header.start_date + ' - ' + header.end_date
      h2= header.passenger_name
      a(href="https://#{basePath}/trips/#{header.id}-#{header.name}") https://#{basePath}/trips/#{header.id}-#{header.name}
    main.main
      ul.day-list
        each day in itinerary
          li.clearfix
            div.day-ctn
                span.nod-ctn= day.date.substr(8,2)
                span.month-ctn= month[parseInt(day.date.substr(5,2))-1]
            div.events-list
              ul
                each event in day.events
                  li.event-cluster
                    if event.type == 'Driving'
                      +driving(event)
                    else
                      +place(event)
      footer footer



